{% extends 'template.html' %}
{% block title %}Welcome to Stevens Book Marketplace{% endblock %}
{% block content %}
<!-- Search Section -->
<section id="stv-search">
    {% include 'jumbotron.html' %}
</section>

<!-- Listing Section -->
<section id="stv-listing">
<div class="container ">
    <div class="row">
        <nav class="col-sm-12" >
            <ul class="nav nav-pills" role="tablist">
              <li role="presentation"><a href="#">Course List</a></li>
                <!-- The reason why I like selling books badged here is because it's a motivator to sell,
                user has to login to see it, imo -PW -->
              <li role="presentation"><a href="#">Selling books <span class="badge">3</span></a></li>
            </ul>
        </nav>
    </div>

    <div class="row">
        <div class="col-sm-12">
            <div class="list-group container" id="course-container">
                <!--    Temporary, We need a user database account, where we can query a count of the
                        top listings based on ISBN. I've created a get first 10 items from the DB to simulate.
                -->
                <div class="list-group-item active">Top Ten Listings</div>
                {% for book in listing %}
                    <div class="list-group-item">
                        {{ book.get('google-metadata', {}).get('volumeInfo', {}).get("title") | default(book.get('stevens-metadata', {}).get('book-title'), True) }}
                        <span class="badge">{{ book._id }}</span>
                        <!-- Not sure if the below is correct, I had to target it as book.courses.0. in order to get anything -PW -->
                        <span class="badge">{{ book.courses.0.get('letter', "")+ "-" + book.courses.0.get('number', "NONE") }}</span>
                        <span class="badge">3</span>
                         <!-- this 3 above represents book's available, needs new value which queries the count available of the specific book listed -->
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
</section>
{% endblock %}
