{% extends 'template.html' %}
{% block title %}Welcome to Stevens Book Marketplace{% endblock %}
{% block content %}
<!-- Search Section -->
<section id="stv-search">
    <div class="jumbotron text-center">
        <h1><strong>Stevens Book Marketplace</strong></h1>
        <form action="/jumbo_search" class="form-inline" method="POST">
            <div class="input-group ">
                <input type="search" name="jumbo-search" id="jumbo-search" class="form-control" size="50 " placeholder="Search for books or by class ">
                <div class="input-group-btn ">
                    <button class="btn btn-default " type="submit" value="send">
                        <i class="glyphicon glyphicon-search "></i>
                    </button>
                </div>
            </div>
        </form>
    </div>
</section>

<!-- Listing Section -->
<section id="stv-listing">
<div class="container ">
    <div class="row">
        <nav class="col-sm-12" >
            <ul class="nav nav-pills" role="tablist">
              <li role="presentation"><a href="courses/">Course List</a></li>
                <!-- The reason why I like selling books badged here is because it's a motivator to sell,
                users has to login to see it, imo -PW -->
              <li role="presentation"><a href="#">Selling books <span class="badge">3</span></a></li>
            </ul>
        </nav>
    </div>

    <div class="row">
        <div class="col-sm-12">
            <div class="list-group container" id="course-container">
                <!--    Temporary, We need a users database account, where we can query a count of the
                        top listings based on ISBN. I've created a get first 10 items from the DB to simulate.
                -->
                <div class="list-group-item active">Top Ten Listings</div>
                {% for book in listing %}
                    <div class="list-group-item">
                        {{ book.get('google-metadata', {}).get('volumeInfo', {}).get("title") | default(book.get('stevens-metadata', {}).get('book-title'), True) }}
                        <span class="badge">{{ book._id }}</span>
                        <!-- Not sure if the below is correct, I had to target it as book.courses.0. in order to get anything -PW -->
                        <span class="badge">{{ book.courses.0.get('letter', "")+ "-" + book.courses.0.get('number', "NONE") }}</span>
                        <span class="badge">3</span>
                         <!-- this 3 above represents book's available, needs new value which queries the count available of the specific book listed -->
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
</section>
{% endblock %}
